
# 안부 묻기

## 시작은 어떻게
- 상대방을 편하게 만들고 있는가?
- 시작하는 줄 모르게 하라.
	- 프리 토크가 회의의 질을 결정한다.
	- 시작을 모르게 해 상대방이 솔직한 상태이도록 유도하라
- 상대의 에너지와 나의 에너지를 맞춰라
- 상대의 보폭에 맞춰라. 상대의 언어에 스타일에 맞춰 대화하라.


- 상대를 편안하게 하고 있는가
- 시작하는 줄 모르게 하라
- 처음 에너지 밸런스를 인지하라
- 성급히 판단하지 말고, 조심스러운 표현을 사용하라
- 일상의 주제에서 시작하여 주제를 확장하라.


## 이어가는 기술
- 미러링, 리플렉션 등의 방법을 활용하라.
	- ex) 피곤하네요! -> 피곤하시군요.
	- 액티브리스닝(ActiveListening)이 필요하다. 내가 듣고 있다는 사실을 상대방에게 인지시켜 줘라
- Paraphrasing(의역) 의 방법을 활용하라.
	- 상대방 말에서 예측할 수 있는 내용을 대답해주어라. 리플렉션의 다른 방법
- 열린 질문을 해야 한다.
	- 열린질문이란 범위를 넓혀서 하는 질문이라 볼 수 있겠다. 요즘 어떠신데용와 같은


대화가 막혔을 때 반영하기(미러링)으로 상대가 한 말을 되돌려줄 수 있다.
- 백채널(Back-Channel) : 감탄사를 내뱉는 것
- 축어적 미러링 : 상대방이 한 말을 그대로 따라하는 것
- 선택적 미러링 : 상대방이 한 말을 약간 바꾸어 다시 말하는 것
- 복합반영 : 잠시 후에 나올 말을 넘겨짚어서 미리 말하는 것



## 좀 더 속마음을 알기 위해
- 상대방의 감정을 추측하여 그 추측한 감정에 대해 이름표를 달아줘라
	- 하! 속상하셨겠네요 제가 다 화나내요.
- 메타포(비유)를 활용해라 
	- 상대방에 메타포를 이용해라


1. 신호 읽기 : 상대가 말을 하면서 드러나는 비일치적인 신호 잡아내기
	- 비일치적인 신호란 말과 행동이 다른 즉 기분 좋다고 얘기하지만 사실 아닌 것 같은 내용을 찾아야 한다.
2. 마음 읽기와 라벨링(Labeling)
	- 상대의 감정 상태를 언급해보기
3. 복합반영
	- 상대방이 할 법한 말들을 미리 넘겨짚어서 말해보기
4. 비유(Metaphor)
	- 상황에 어울리는 비유를 들어 마음을 표현해주기


## 안부 묻기의 목적
- 신뢰 구축 연습 ( 라포 형성 연습 )
- 상대방의 근황 정보 수집




# 클래스와 인터페이스

### 개요

추상화의 기본 단위인  클래스와 인터페이스는 자바의 뇌와 심장이다. 해당 장은 클래스와 인터페이스를 잘 사용하는 법을 학습힌다.



## Item. 15
### 클래스와 멤버의 접근 권한을 최소화하라

### 개요
잘 설계된 컴포넌트는 모든 내부 구현을 숨겨서, 외부와 완벽히 분리해 낸다. 이 한 문장의 내용이 정보 은닉과 캡슐화의 전부이다.

### 정보은닉과 캡슐화

#### 정보은닉의 장점
- 각 컴포넌트를 병렬적으로 개발할 수 있도록 해 시스템 개발 속도를 높인다.
	- 여러 개발자가 병렬적으로 독립적인 컴포넌트를 각각 개발하여 시스템 개발 속도 향상을 돕는다.
- 각 컴포넌트롤 독립적으로 빠르게 파악하고 디버깅하며 교체할 수 있도록 해 시스템 관리 비용을 낮춘다.
- 각 컴포넌트를 따로 개선하여 성능 최적화에 도움을 준다.
- 각 컴포넌트를 따로 분리해 사용할 수 있기 때문에 소프트웨어 재사용성을 높인다.
- 각 컴포넌트를 분리하여 개발 하기 때문에 큰 시스템 개발 난이도를 낮춰준다.

##### 자바의 접근 제어자
- `private` : 같은 클래스 내에서만 접근 가능하다.
- `package-private` : 같은 패키지 내 모든 클래스가 접근 가능하다.
- `protected` : 같은 패키지 및  하위 클래스에서 접근 가능하다.
- `public` : 모든 곳에서 접근 가능하다.


#### 정보은닉의 원칙
-  **모든 클래스와 멤버의 접근성을 가능한 한 좁혀야 한다.**
- 테스트를 위해 클래스, 인터페이스, 멤버를 공개 API로 만들어서는 안된다.
- `public`  클래스의 인스턴스 필드는 되도록 public이 아니어야 한다.
- `public`  가변 필드를 갖는 클래스는 일반적으로 Thread-Safe 하지 않다.
- `public static final`은 불변 객체 혹은 기본 타입만을 참조해야 한다. 배열 역시 접근 가능하게 두어서는 안된다. 때문에 배열을 가변불가 하게 만들거나 접근을 제한하고 복사해서 사용해야 한다.

## Item. 16
### `public` 클래스에서 `public` 필드가 아닌 접근자를 사용하지 마라.

OOP의 클래스에서는 내부의 모든 상태를 외부에서 직접 접근하지 못하도록 `private` 으로 선언하고 외부에서 접근이 필요하다면 접근자(`getter`)를 제공해야 한다.


## Item. 17
### 변경 가능성을 최소화 하라

#### 개요
불변 클래스는 인스턴스의 내부 값을 수정할 수 없는 클래스를 의미한다. 불변 인스턴스의 값을 생성 시점 이후에 변경이 불가능하다. 자바에 기본으로 제공하는 `String` 역시 불변 클래스다. 불변 클래스를 사용하면 설계, 구현, 사용이 쉽고 오류의 여지도 적어진다.

#### 불변 객체 조건
- 객체의 상태 변경을 하는 메서드( `setter` ) 를 제공하지 않는다 
- 클래스를 확장할 수 없도록 한다. ( `final class : 상속 불가 ` )
- 모든 필드를 `final` 로 선언한다. 
- 모든 필드를 `private` 으로 선언한다.
- 자신 외에는 내부의 가변 컴포넌트에 접근할 수 없도록 한다. 
	- 이를 위해서 가변 컴포넌트를 외부에 제공할 대는 모두 방어적 복사를 하게 하라. 외부에서 참조를 통해 가변 컴포넌트 변경할 가능성을 만들어서는 안된다.

> 자바의 record 나 코틀린의 data class 가 위와 같은 방식을 기본으로 제공한다.
> 자바의 record 는 JDK 16부터 제공한다.

#### 불변 객체의 장점
- 프로그래밍 내에 불변이 되는 영역이 높아지면서 신경써야 할 부분이 줄어든다.
- **불변 객체는 단순하다.** 
	- 불변을 보장해 시간의 순서와 상관 없이 값을 믿고 사용할 수 있다는 것을 의미한다.
- Thread-Safe 하다.
	- 불변 객체는 변경이 불가능 하기 때문에 동시에 다수의 스레드가 동시 접근해도 그 정합성이 달라질 가능성이 없다. 때문에 안심하고 공유가 가능하다.
	- 공유가 가능하다는 것은 방어적 북사가 필요 없어지고 가비지 컬렉션 비용이 줄어든다.
- 불변 객체끼리 내부 데이터 공유가 가능하다.
	- 불변 객체의 BigInteger 의 경우 부호가 반대인 인스턴스로 복사하는 메서드인 `negate` 가 있다. 해당 인스턴스는 내부의 부호를 제외한 상태 변수를 원본과 공유한다. 때문에 생성 비용이 줄어든다.
- Map의 키 혹은 Set 의 요소로 불변 객체를 사용하면 불변식이 깨질 걱정이 없어진다.

#### 불변 객체의 단점
- 값이 다른 인스턴스는 항상 새로운 인스턴스로 만들어주기 때문에 더 많은 메모리 사용이 필요할 수 있다.
	**대처 방법**
	- 다단계 연산 (multistep operation)을 예측하여 가변 동반 객체(companion class)로 미리 만든다.
		- ex) `String - StringBuilder`
	- 생성자를 private 으로 두고 정적 팩터리 메서드를 제공하는 것. 다

> 합당한 이유가 없다면 모든 오브젝트의 필드는 private final 이어야 한다. 생성자는 초기화가 완벽이 끝난 상태의 객체를 생성해야 한다. 절대 이유 없는 setter를 제공해서는 안된다.


	코틀린은 대부분의 필드나 클래스 메서드가 기본적으로 final 로 선언한다. 목적이 있을 대만 open 키워드를 통해 상속, 오버라이딩이 가능하다.


## Item. 18
### 상속보다는 컴포지션

#### 개요
상속은 재사용을 위한 강력한 수단이지만 최선은 아니다. 상속은 서브 클래스에게 상위 클래스의 정보를 노출한다 즉, 상속은 캡슐화를 깨뜨린다.  때문에 상속은 확실한 목적을 가지고 통제할 수 있을 때 사용해야한다.

#### 상속의 문제점
- 상속은 캡슐화를 깨뜨린다. 
	- 서브 클래스에서 상위 클래스에 내용을 알 수 있다. 
	- 또한 상위 클래스 변경에 서브 클래스는 영향을 받는다.

	해결 방법
	브릿지 패턴 혹은 데코레이터 패턴을 사용하여 (상속보다 컴포지션) 해결 할 수 있다. 코틀린에서는 확장함수를 제공하지만 자바에서는 그러한 방법을 제공하고 있지 않다보니 컴포지션을 활용하라.



